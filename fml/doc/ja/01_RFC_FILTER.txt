X-Sequence: fml-devel 252

フィルタ

	header

	body
		non-mime
			permit / reject (4.0 の content filter の !MIME)

		mime component filter
			4.0 の content filter

		text/plain filter
				ja, en, ... (言語依存)
				非言語依存パート (M$ GUID scanner みたいな)

			先頭部分の text/plain パートに対する
			シンタックスチェック

本当はこれ以外に、外部の virus scanner なりに飛ばす迂回路が必要だと思
うんだけど、それは考えてない。
＃ とりあえず、それは postfix でやってくれぃと 


○ TODO

まだ、text/plain 部分は言語依存パートになってない。
だいたい言語依存とかいうなら virus checker を切り離せよ ＞ おれ

など、てんこもりなので、text_plain_filter ってちょっと整理が大変だなと。
それは一旦おいといて、とっとと content filter の構造を再構成しよう。

	text/plain 	permit
	text/html	reject
	*		permit

みたいなルールに従って判定をするように改造したいとおもいます。


○ [参考] 現在の変数体系

=head2	フィルタ

use_article_filter	= 	yes
 

article_filter_functions	=	article_header_filter
					article_non_mime_filter
					article_mime_component_filter
					article_text_plain_filter

=head2	ヘッダ情報ベースのフィルタ

use_article_header_filter		=	yes

article_header_filter_rules		=	check_message_id
						permit

=head2	MIME 情報ベースのフィルタ

use_article_non_mime_filter		=	yes

article_non_mime_filter_rules		=	permit

use_article_mime_component_filter	=	yes

article_mime_component_filter_rules	= $fml_config_dir/mime_component_filter

=head2	テキスト部分に対するフィルタ

use_article_text_plain_filter		=	yes

article_text_plain_filter_rules	=	reject_not_iso2022jp_japanese_string
					reject_null_mail_body
					reject_one_line_message
					reject_old_fml_command_syntax
					reject_invalid_fml_command_syntax
					reject_japanese_command_syntax
					reject_ms_guid
					permit



----
$FML$
