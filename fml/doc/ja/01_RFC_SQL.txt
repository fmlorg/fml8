X-Sequence: fml-devel 204

Q:  sql の設定を一つの cf ファイルに書けるようにしておきたい

A1: グルーピングの表現

	mysql:ID などと書いた時に、その ID でのグルーピングを表現でき
	れば良い？ じゃ .ini 形式か？ :-)

A2: SQL 構文も書けるようにしておけばよい？

	関数が呼ばれた時に始めて決まる変数もあるので
	cf で全部定義することはできない。

	lexical scope で取り扱われる変数の表現があれば解決？
	例: &varname 記法(下記)

	注: IO::Adapter は 

		my $obj = new IO::Adapter $mapname, $config;

	とする

○ cf の例：

member_maps 	= 	mysql:database

recipient_maps 	= 	mysql:database

[mysql:database]

[mysql:fml]

sql_server	=	localhost
sql_user	=	fml
sql_password	=	uja
sql_database	=	fml
sql_table	=	ml

sql_get_next_key =	select fml_address from $sql_table
			where fml_ml = '$ml_name'
					and
				fml_domain = '$ml_domain'

sql_getline	=	select * from $sql_table
			where fml_ml = '$ml_name'
					and
				fml_domain = '$ml_domain'

sql_add		=	insert into $sql_table
			values ('$ml_name', '$ml_domain', '&address', 1, 1)

sql_delete	=	delete from $sql_table
			where	fml_ml = '$ml_name'
					and
				fml_domain = '$ml_domain'
					and
				fml_address = '&address'

sql_find	=	select * from $sql_table
			where	fml_ml = '$ml_name'
					and
				fml_domain = '$ml_domain'
					and
				fml_address like '&regexp'

