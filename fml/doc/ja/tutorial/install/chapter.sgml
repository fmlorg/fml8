<!--
	$FML: chapter.sgml,v 1.5 2001/10/13 08:47:56 fukachan Exp $
-->

<chapter id="installation">

	<title> インストール </title>


<!-- ====================================================== --> 
<sect1 id="install">
	<title> 概要 </title>


<para>
configure (GNU autoconf) および make を実行して下さい。
<screen>
% su root
# ./configure
# make install
</screen>
make install はシェルスクリプト INSTALL.sh を実行するだけです :-)
</para>

<para>
変更が必要なら configure の引数で変更して下さい。
変更できる変数は以下のものです。
fml では各ディレクトリにさらに /fml といった suffix をつけます。
変更できるのはその直前の prefix 部分までです。
<screen>
変数            configure のデフォルト値    fml の利用するディレクトリ
--------------------------------------------------------
prefix          /usr/local                  /usr/local
exec_prefix     /usr/local
bindir          ${exec_prefix}/bin          /usr/local/bin
sbindir         ${exec_prefix}/sbin         /usr/local/sbin
libexecdir      ${exec_prefix}/libexec      /usr/local/libexec/fml
datadir         ${prefix}/share             /usr/local/share/fml
sysconfdir      ${prefix}/etc               /usr/local/etc/fml
sharedstatedir  ${prefix}/com         
localstatedir   ${prefix}/var
libdir          ${exec_prefix}/lib          /usr/local/lib/fml
includedir      ${prefix}/include       
oldincludedir   /usr/include
infodir         ${prefix}/info
mandir          ${prefix}/man
</screen>
また
<screen>
mlspooldir      /var/spool/ml               /var/spool/ml
fml_owner       fml                         fml
</screen>
これらの変数は、それぞれ
<screen>
--with-mlspooldir=DIR
--with-fml-owner=USER
</screen>
で上書きすることができます。
</para>

</sect1>


<!-- ====================================================== --> 
<sect1>
	<title> 各ディレクトリの役割 </title>

<para>
それぞれのディレクトリの役割は次の通りです。
なお、デフォルトは /usr/local 以下にインストールされます。
</para>

<para>
  <table>
    	<title> ディレクトリの構造 </title>
    <tgroup cols=2>

      <thead>
        <row>
          <entry> ディレクトリ 		</entry>
          <entry> 説明			</entry>
        </row>
      </thead>

      <tbody>
        <row>
          <entry> /etc/fml	</entry>
          <entry>
		基本設定ファイルを置く場所。
		( fml 4 の /usr/local/fml/.fml や default_config.ph 相当)

		バージョンやライブラリの場所(ディレクトリ)などを指定する。
          </entry>
        </row>
  
        <row>
          <entry> /usr/local/libexec/fml 		</entry>
          <entry>
		実行ファイル ( fml 4 の /usr/local/fml )
	  </entry>
        </row>

        <row>
          <entry>
		/usr/local/lib/fml
	  </entry>
          <entry>
		ライブラリ ( fml 4 の /usr/local/fml )
	  </entry>
        </row>

        <row>
          <entry>
		/usr/local/share/fml
	  </entry>
          <entry>
		メッセージなどのテンプレート、
		言語依存です。
	  </entry>
        </row>

        <row>
          <entry>
		/var/spool/ml
	  </entry>
          <entry>
		ＭＬのホームディレクトリ。fml 4 と同じ目的です。

		注意: /var/spool/ml のオーナは INSTALL.sh の
		owner 変数(デフォルトはユーザ fml)に設定されます。
	  </entry>
        </row>
      </tbody>

    </tgroup>
  </table>
</para>
</sect1>


<!--
    ======================================================
	main.cf の例
    ======================================================
--> 
&sect.main.cf;


<!-- ====================================================== --> 
<sect1 id="upgrade">
	<title> アップグレード </title>

<para>
単に、もう一度
<link linkend="install">インストール</link>
して下さい。
</para>

<para>
インストール後、/etc/fml/main.cf の fml_version 行の日付を
最新のものにして下さい。
ファイルをセーブした瞬間から新しい fml に切り替わります
(注: エディタで編集中は古い内容)。
</para>
</sect1>

<sect1>
	<title> ダウングレード </title>

<para>
	/etc/fml/main.cf の fml_verison をアップグレード前のものに
	戻して下さい。
</para>

</sect1>


</chapter>
