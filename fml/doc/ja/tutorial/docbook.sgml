<!--
	$FML: docbook.sgml,v 1.4 2001/04/26 11:31:18 fukachan Exp $
-->

<appendix id="docbook">


<title> SGML の書き方 </title>

<para>
fml-devel (fml 5.0) のドキュメントでは、SGML の DTD は

	<ulink url="http://www.oasis-open.org/docbook/">
	DOCBOOK
	</ulink>

をごくごく普通に使うことにします。
</para>

<para>
ここでは、SGML を書くために最小限必要な知識についてメモします。
</para>

<para>
基本的な SGML の書式は、当たり前ですが、正しい HTML の書き方と同様です。
本 Appendix で、２、３の典型的な SGML テンプレートをメモしておくので、
それらを適当に切り剥ぎしていけばなんとかなるはずです。
</para>


<!--  =========================================================  -->
<sect1>

<title> 本( book )形式のテンプレート </title>

<para>
book スタイルの典型的な SGML のテンプレートは次のようになります。
</para>

<screen>
&lt;!doctype book public "-//OASIS//DTD DocBook V3.1//EN" [
	&lt;!entity % include SYSTEM "include.sgml"&gt; %include;
]&gt;
&lt;book&gt;

  &amp;bookinfo;
  &amp;preface; 

  &lt;toc&gt;&lt;/toc&gt;

  &lt;part&gt;
	&lt;title&gt; タイトル &lt;/title&gt;
	&lt;partintro&gt;
	&lt;para&gt;
	本パートは…目指しています。
	&lt;/para&gt;
	&lt;/partintro&gt;

	&lt;!-- 以下、各章が並ぶ --&gt;
	&amp;overview;
  &lt;/part&gt;
&lt;/book&gt;
</screen>

<para>
part や title は文字通りの意味です。
</para>

<para>
ここで注目するべきは、SYSTEM というキーワードのある、
2 行目です。
これは include.sgml を include する命令です。
C 言語の #include や
perl の require() と同様の働きをしています。
</para>

<para>
さらに、 include.sgml の中では次のような命令が定義されています。

<screen>
&lt;!-- include する SGML ファイル群 --&gt;
&lt;!entity bookinfo  SYSTEM "bookinfo.sgml"&gt;
&lt;!entity overview  SYSTEM "overview.sgml"&gt;
</screen>

これらの定義により
&amp;bookinfo;
命令で 
bookinfo.sgml 
が include されるようになります。

このようにして、文書本体と
include するべき定義ファイルを
分離することができます。
</para>

</sect1>


<!--  =========================================================  -->
<sect1>
	<title> HTML の &lt;UL&gt; 相当 </title>

<screen>
&lt;itemizedlist&gt;

   &lt;listitem&gt;
	&lt;para&gt;
		アイテム１
	&lt;/para&gt;
   &lt;/listitem&gt;

   &lt;listitem&gt;
	&lt;para&gt;
		アイテム２
	&lt;/para&gt;
   &lt;/listitem&gt;

&lt;/itemizedlist&gt;
</screen>

<para>
例えば

<screen>
&lt;itemizedlist&gt;

   &lt;listitem&gt;
	&lt;para&gt;
		けんけんはきたきつね
	&lt;/para&gt;
   &lt;/listitem&gt;

   &lt;listitem&gt;
	&lt;para&gt;
		るどるどはテディベア
	&lt;/para&gt;
   &lt;/listitem&gt;

&lt;/itemizedlist&gt;
</screen>

は次のようになります。

<itemizedlist>
   <listitem>
	<para>		けんけんはきたきつね	</para>
   </listitem>
   <listitem>
	<para>		るどるどはテディベア	</para>
   </listitem>
</itemizedlist>

数字付のアイテムは orderedlist です。

<orderedlist>
   <listitem>
	<para>		けんけんはきたきつね	</para>
   </listitem>
   <listitem>
	<para>		るどるどはテディベア	</para>
   </listitem>
</orderedlist>

</para>

</sect1>


<!--  =========================================================  -->
<sect1>
	<title> HTML の &lt;TABLE&gt; 相当 </title>

<screen>
&lt;para&gt;
  &lt;table&gt;
    &lt;title&gt; テーブルのタイトル &lt;/title&gt;
    &lt;tgroup cols=2&gt;

      &lt;thead&gt;
        &lt;row&gt;
          &lt;entry&gt; キー 		&lt;/entry&gt;
          &lt;entry&gt; 値		&lt;/entry&gt;
        &lt;/row&gt;
      &lt;/thead&gt;

      &lt;tbody&gt;
        &lt;row&gt;
          &lt;entry&gt; キー 1 		&lt;/entry&gt;
          &lt;entry&gt; 値 1		&lt;/entry&gt;
        &lt;/row&gt;
  
        &lt;row&gt;
          &lt;entry&gt; キー 2  	&lt;/entry&gt;
          &lt;entry&gt; 値 2		&lt;/entry&gt;
        &lt;/row&gt;
      &lt;/tbody&gt;

    &lt;/tgroup&gt;
  &lt;/table&gt;
&lt;/para&gt;
</screen>

<para>
例えば

<screen>
&lt;para&gt;
  &lt;table&gt;
    &lt;title&gt; table description &lt;/title&gt;
    &lt;tgroup cols=2&gt;

      &lt;thead&gt;
        &lt;row&gt;
          &lt;entry&gt; 名前 		&lt;/entry&gt;
          &lt;entry&gt; 説明		&lt;/entry&gt;
        &lt;/row&gt;
      &lt;/thead&gt;

      &lt;tbody&gt;
        &lt;row&gt;
          &lt;entry&gt; けんけん	&lt;/entry&gt;
          &lt;entry&gt; きたきつね	 &lt;/entry&gt;
        &lt;/row&gt;
  
        &lt;row&gt;
          &lt;entry&gt; るど 		&lt;/entry&gt;
          &lt;entry&gt; テディベア	 &lt;/entry&gt;
        &lt;/row&gt;
      &lt;/tbody&gt;

    &lt;/tgroup&gt;
  &lt;/table&gt;
&lt;/para&gt;
</screen>

は次のようになります。

  <table>
    <title> テーブルの見本 </title>
    <tgroup cols=2>

      <thead>
        <row>
          <entry> 名前 		</entry>
          <entry> 説明		</entry>
        </row>
      </thead>

      <tbody>
        <row>
          <entry> けんけん	</entry>
          <entry> きたきつね	 </entry>
        </row>
  
        <row>
          <entry> るど 		</entry>
          <entry> テディベア	 </entry>
        </row>
      </tbody>

    </tgroup>
  </table>
</para>

</sect1>



<!--                プログラミング、ツール群      -->
<sect1>
<title> ツール群 </title>

<para>

SGML を HTML などに翻訳するために、いくつかのツールが必要です。
僕は、これらのプログラムを使っています。
<itemizedlist>

   <listitem>
	<para>
           openjade       1.3
	</para>
   </listitem>

   <listitem>
	<para>
           opensp         1.3.4
	</para>
   </listitem>

   <listitem>
	<para>
           SGMLtools-Lite 3.0.2
	</para>
   </listitem>

</itemizedlist>

多くの OS では附属のパッケージシステムで一発ポン！てなもんでしょう。
</para>

<para>
適宜、これらのプログラムをインストール後、
fml/doc/share/sgml/catalog.sample 
を参考にして
/etc/sgml/catalog を編集する必要があるかも知れません。
</para>


<para>
SGML からの変換には
fml/doc/share/sgml/ にある fml.dtd fml.dsl も使っています。
これらは各 Makefile 内に
定義(jade に与えるオプション -c や -d オプション)が記述されています。
</para>


<warning>
<para>
NetBSD 1.5-stable 系列(およびそれ以前のバージョン)上で 
openjade を compile するには unproven-pthreads が必要ですが、
以前作った時の変な include ファイルが残っていて
openjade をうまく compile できないことがありました。

うまくいかない時はまっさらにして全部やり直してみましょう。
</para>
</warning>

</sect1>

<!--  =========================================================  -->
<sect1>

<title> 見栄えを変更する </title>

<para>
SGML は論理的な構造を記述している言語です。
HTML の各ページに URL をつけたいとか、画像をつけたいといった
”見栄えの記述”は直接はできません。
</para>

<para>
そこで、見栄えは DSL により記述をすることになります。
しかしながら、DSL は本質的に LISP (List Processre) 言語なので、
LISP を知らないとちょっと手が出ないでしょう。
</para>

<para>
見栄えは誰かが頑張った結果だけ使えということなのかもしれません。
</para>

<para>
ちなみに fml 5.0 の DSL の記述は

   <ulink url="../../../fml/doc/share/sgml/fml.dsl">
   fml/doc/share/sgml/fml.dsl
   </ulink>

にあります。
こういったものを書かないと見栄えを変えることができません ;)
</para>

</sect1>


<sect1>
   <title>
   その他の情報源 
   </title>

<para>
SGML の書き方については

	<ulink url="http://www.freebsd.org/tutorials/docproj-primer/index.html">
	FreeBSD の初心者向けチュートリアル
	</ulink>

などを参照して下さい。
SGML のタグの一覧は
	
	<ulink url="http://www.oasis-open.org/docbook/documentation/reference/html/docbook.html">
	DOCBOOK definitive guide (O'reilly)
	</ulink>

のオンライン版を参照すると良いでしょう。
</para>

</sect1>

</appendix>
