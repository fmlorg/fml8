<!--
    $FML$
-->

<chapter id="delivery">

   <TITLE> メールの配送 </TITLE>

<sect1 id="fml5-delivery">

   <title> fml5 のメール配送システムについて 
           (fml4 と fml5 の相違点)
   </title>

<para>
fml5 の最大の目的の一つは、メンバーリストの取得と操作の統合と抽象化です。
配送には抽象化された Mail::Delivery クラスを次のように使います。
</para>

<para>
Mail::Delivery::* に属するクラスは SMTP および LMTP 配送へのインターフェ
イスを提供します。

<screen>
    use Mail::Delivery::SMTP;
    my $service = new Mail::Delivery::SMTP;
    if ($service->error) { Log($service->error); return;}

    $service->deliver(
                      {
                          mta             => '127.0.0.1:25',

                          smtp_sender     => 'rudo@nuinui.net',
                          recipient_maps  => $recipient_maps,
                          recipient_limit => 1000,

                          header          => $header_object,
                          body            => $body_object,
                      });
</screen>

ここで $header_object はヘッダで、FML::Header オブジェクトです。
そして $body_oject   はメール本文で、Mail::Message オブジェクトです。
</para>

<para>
ここで、Delivery は
SMTP
ESMTP
LMTP
などへのインターフェイスです。
</para>

</sect1>

</chapter>
