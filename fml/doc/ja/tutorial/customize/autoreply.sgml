<!--
   $FML: autoreply.sgml,v 1.3 2004/04/07 11:07:01 fukachan Exp $
-->


<sect1 id="config.autoreply">
	<title>
	ケーススタディ: 自動ファイル送り返しサーバ
	</title>

<para>
配送プロセス( libexec/distribute )を改造して
/some/where/help ファイルを送り返すことを考えます。
例えば help@fml.org ＭＬを作り、このアドレスにメールを送ると
(うむをいわさず:-)ヘルプファイルを送り返すというものです。
</para>

<para>
この場合の config.cf の例はこのようになります。
<screen>
article_post_restrictions = permit_anyone
</screen>
config.cf ファイルの =cut 行以降に hook を書きます。
<screen>
$distribute_run_start_hook = q{

        $curproc->reply_message( {
                type        => "text/plain; charset=iso-2022-jp",
                path        => "/some/where/help",
                filename    => "help",
                disposition => "help example",
        });

        $curproc->stop_this_process();

};
</screen>
最後の
<screen>
$curproc->stop_this_process();
</screen>
が &fml4; の $DO_NOTHING 変数にあたりますが、&fml8; ではメソッドです。
これで、このHOOK以降、正常の処理が無視されるようになります。 
</para>

</sect1>
