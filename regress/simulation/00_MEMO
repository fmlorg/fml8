		雑多なメモ
		Last Modified: $Date$

	XXX 作業したら TODO/STATUS.txt もアップデートしてね XXX

	XXX
	XXX fml 4.0 と同じディレクトリ名は使わないように    XXX
	XXX


[TODO]	virtual_mps -> $ml_home_prefix_maps ?

	[CHECK]	
		etc/main.cf.in
		FML/Process/Utils.pm


[TODO]	charset と言語(japanese,english)との対応関係を一箇所にまとめて定義

	[CHECK]	
		FML/Process/Utils.pm
		FML/Header/Subject.pm
		FML/Article/Summary.pm
		Mail/Message/Encode.pm
		Mail/Message/ToHTML.pm

	OUTPUT をどうすればよいか？で決まる処理はなんとかなる。
	入力は自動判定になるが、出力は設定ファイルで決まる。

	問題は HTML 化のような入力が動的に変化する場合だ。
	基本的に入力は自動判定ということで、処理は同様なのだが、
	出力(たとえば .html の content-type)も入力と同期して変化するべきだ。


[TODO]	fml 4 の cf を解釈できる互換ルーチン

	cf シンタックスを読んで、
	＃ そういえば、Config::Tiny で出来るね

	8 の .cf シンタックスに置き換えて
	値をよろしく変換する （←ここがむずかしー）


[TODO]	case insensitive of user part of user@domain


[TODO]	rmml したＭＬをふっかつさせることは？

	一番日付が最近の @xxx.yyyymmdd を探して、そこから戻す。

	だが、

	aliases を復活させる問題があるので、もう一度 newml
	もする必要があるだろう。つまり

	newml --reuse ? --rewind ? --return ?
	こんなかんじ？


[TODO]	ドメイン制御をするコマンドを作る

	ドメイン全部きれいに一発で抹殺するには？

	rmml を連発で実行しまくる rmdomain ってのがあればいい？

	コマンド
		newdomain
		rmdomain

	main.cf は virtual_maps -> domain_maps にするべきだろうか？


[TODO]	エラーをどのように呼びだし側へ組織的に伝えるか？

	エラートラップフレーム？

		$curproc->error_regist( { キー => オブジェクト } );
		croak(エラーのキー);

	？ 必要な場所すべてに $curproc ってのが難しそう？

	エラーをどのように呼びだし側へ組織的に伝えるか？
	オブジェクトか HASH_REF ごとわたせないか？


[TODO]	(debug ではない) print STDERR をなくそう => error upcall system

	STDERR は閉じて、$tmp_dir/stderr.$$ などに吐いておくほうがよい？

	->ui_message() 化
	やりのこし （スレッド関連は改造の予定があるので放置）
		FML/Command/Admin/thread.pm
		Mail/ThreadTrack/Analyze.pm
		Mail/ThreadTrack/DB.pm


[TODO]	$use_log_dup
	$log_dup_print_engine


[TODO]	$main_cf (HASH_REF) が FML::Process::{Switch,Utils,Kernel}
	以外で参照されているのは間違いだ！ (FNF?)


[TODO]	remove $pcb->{set,get} other than FML::Process::{Kernel,Utils}

	or PCB {category, key} list up in somewhere (fml/etc ?)


[TODO]	libexec/error エラーメールのフォワードについて改良

	X-Sequence: fml-devel 451

	maintainer_recipient_maps は実装しました。デフォルトは未定義な
	ので、エラーメールのフォワードィングは行なわれません。

	あと、単にフォワーディングしてるだけ == 中身が message/rfc822
	一通だけのかなーり無意味な mime/multipart です。

	ヘッダ情報＋そのエラーメールのアドレスの分析レポートとかなんか
	付けてやれやーとかちょっと思っているっす。


[TODO]	「このＭＬはもうありません」

	libexec/relocated , Process/Relocated とかじゃだめだね。
	libexec/ の下の全部のプログラム全部が対応するべきのような…
	つまり
		ml
		ml-ctl
	宛に来たもの両方に返事を返すべきだろう。
	でも、ml-error はちがうだろうなぁ

	！じゃ、こんなコマンドは？
		makefml disable elena
		makefml enable  elena

	このコマンドは…ファイルでも作るの？


[TODO]	ファイル数が多い場合、分割して送り返す (fml-devel 485)

	reply_message() によろしくねーとしかしてないので、
	メールキューに入れる時に分割？


[TODO]	fml $ml spool {status,convert}: --srcdir= とか必要じゃない？

	コマンドラインオプションは、OK？

	コマンド固有オプションは + ってのは、どうよ？


[TODO]	時間つき newml だと、あれか…

	libexec/auto-newml ?


[TODO]	スレッド関連のモジュール全部見直せよ

	スレッド DB 再生成の呪文がないよ;)

	スレッドその他のエンジンもそれを使うことになる。

	Mail/ThreadTrack/Print/Utils.pm に STR2EUC がある

	MTI との統合

	Mail::ThreadTrack のクリーニング

	fml $ml thread $subcommand: モジュールの clean up

	スレッド関連のモジュール全部見直せよ

		コマンドラインオプションは、OK？

		Mail::ThreadTrack
		FML::Article::Thread		(不要じゃないの？)

	どこに、なんのメソッドがあるべきなのか？

	output とモードの明瞭化を
	どこでどう CSS とたたかうの？
	Mail::ThreadTrack::Analyze をきれいにしないとね

	index.html (fml-devel 234)
	 	最近のＭＬのレビュー
	 		＋
	 	選択画面 → index thread monthly

	ちょっと見栄えが？
		見栄えを config.cgi などと合わせる方が良いでしょう
		＃ テーブルベースの見栄え

	ドキュメントの見直し（？）

	subdir によって、ちょくせつのリンクがつらい？

	あるごりずむ ?

 	+
		+
			+ (3)


	+ (4)
		+

	となっているときに (3) の next_thread はいつ次のリンクがわかる
	のか？予言できない。過去に向かってスレッドを修正するアルゴリズ
	ムなので、過去の修正がいつ行なわれるかは良くわからない;)

	→ (4) が来た時に (3) を修正するべき？

	とりあえず、すれっど全部のファイルに修正を試みるべきだ。
	ローカルな更新は、あまりよい結果にならないようだ。


[TODO]	Subroutine_O_CREAT_redefined_at_

>qmailで使っていると出る最近のメッセージ(送信は出来ています)
>#なんで再定義なんだかよくわからん
>
>Subroutine_O_CREAT_redefined_at_
>/usr/local/fml5/lib/fml/current-20030305/IO/Adapter/File.pm_line_161
>Subroutine_O_RDWR_redefined_at_
>/usr/local/fml5/lib/fml/current-20030305/IO/Adapter/File.pm_line_161

おー これもたまに見る。module の load の順番だか何だかからくるんだろうけど…

FileHandle と IO::File 両方 use しちゃうからか？

うーん、わからん。


======================================================================
○		アドレスの操作


[TODO]	$ml-admin の取り扱い

	X-Sequence: fml-devel 435

	Q: makefml newml elena --maintainer=foo@bar.domain

	aliases は

		elena-admin: foo@bar.domain

	とかなるのはあり?

	Q: configure で?

		elena-admin: fml

	を

		elena-admin: foo@bar.domain

	にできるおぷしょん？

	Q: default_ml_admin_addr = $maintainer などという変数を創設？
		newml 時に考慮される。

		$newml_command_ml_admin_addr ?


[TODO]	受信者としてだけの登録 (add2actives 相当、メールマガジンなど)は？

	admin コマンド アドレス        --as-recipient

	例:
	admin useradd  rudo@nuinui.net --as-recipient

	?

	＊ こういう形式を認めると言うのはどうだ？

		fml $ml コマンド-サブコマンド アドレス
		fml $ml useradd-as-recipient アドレス


[TODO]	reply-to: special hack

	   if (	To: ml1, ml2 ) {
		set Reply-To: ml1, ml2
	   }


[TODO]	IO::Adapter::LDAP


[TODO]	IO::Adapter の SQL まわりの改良を？

	ん？もういいのかな？


[TODO]	時間つき subscribe

	subscribe -> 一カ月すると削除される？


[TODO]	makefml で動くもの、動かないものは何？

			get	***disabled***
			mget	***disabled***
			send	***disabled***
			password	不要？
			pass		不要？
			dir 	＊不要？
			ls 	＊不要？
			file 	＊不要？
			list 	＊不要？

	* CGI でも不要？

		dir ls file

	   FML::Command::Admin::dir
		cgi_menu() ?
		ディレクトリ listing してくれる perl module ないかな？

	* makefml get ???

	ところで、誰に送信するんじゃ？ :-) って、そうか、makefml じゃ
	なくて admin コマンドの時は考えなくてもいいからだな、それは …


[TODO]	cgi のスタイルシート対応

	文字を小さくした方がいいとか…の類。
	＃だれか、やってぇ〜 ;)


[TODO]	Mail::Message::ToHTML

	X-Sequence: fml-devel 515

	1) spam対策の表示処理について

	今メールアドレスとかを名前の部分だけか address@xxx.xxx.xxx み
	たいな感じで処理をしていますが、ヘッダ部分のTo:とかCC:とかはそ
	のままなので、これも直した方がいいかも。また逆にこの機能は会社
	のwebではそのまま表示されるのが望ましいので変数で処理できるよ
	うにしたい

	2) indexの要、不要について

	現状ではall,monthly,threadが出来るが、これらも選択できるほうが
	良いかも#２万通以上のMLがあるとallは不要と思えてくる...

	3) thread.htmlの月別の作成＆出来れば逆順のもの


[TODO]	xxx_restrictions = pgp_signature_check ?



======================================================================
○		FNF-ify およびドキュメント



[TODO]	HOOK のガイドライン？

	どの HOOK あたりで、なにをかくべきか？


[TODO]	01_RFC_IO_ADAPTER.txt
[TODO]	01_RFC_UPGRADE.txt

	かんがえよー／まとめようー


[TODO]	ドキュメント( tutorial )

	module/Mail::Message::ToHTML
	threadtrack/chapter.sgml
	threadtrack/tools.sgml

	usage/ がいまいち
	fml bible のパートIIIの最初の部分のように編成し直すべき


[TODO]	ドキュメントの翻訳

	どうやってシンクロするの？


[TODO]	2002 年のオーバホールの残り

  ＊ 要 BUG FIX
	Mail/Delivery/SMTP.pm

  ＊おもたい
	FML/Process/Kernel.pm
	Mail/Message.pm

   * IN/OUT のチェック
	Mail/Message/ToHTML.pm

	OUT のちぇっくで最重要なのは？

	Mail/Message/ToHTML.pm
	Mail/ThreadTrack/Print

	Mail/Message/Print などに集結させるべきだろう？

		print_axss (against cross site scripting).


[TODO]	remove $msg->{ next }

	FML/Filter/TextPlain.pm
	Mail/Message/ToHTML.pm
	Mail/Message.pm
	Mail/Bounce/Postfix19991231.pm
	Mail/Bounce/Qmail.pm


[TODO]	ちょっとコーディングスタイルが古いかな?

		FML::Header
		FML::Header::Subject
		File::Sequence
		Mail::Delivery::* (?)
		FML::Filter::TextPlain
		FML::Filter::Header

	ちょっとコーディングスタイルが古いかな?
	近々に見直すべし


======================================================================
○	用意しただけ/途中も途中…


[TODO]	ファイルを用意しただけやんシリーズ;)
	これから改造するので、ほとんど未修正のままのこす

		一度削除するか？

	FML::Process::Qmail


----------
$FML: 00_MEMO,v 1.92 2003/10/26 02:41:38 fukachan Exp $
