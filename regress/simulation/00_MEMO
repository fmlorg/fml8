		雑多なメモ
		Last Modified: $Date$

	XXX fml 4.0 と同じディレクトリ名は使わないように
	XXX 作業したら TODO/STATUS.txt もアップデートしてね
	XXX このファイルは、なる早で解決する/bug fix するべきもの
        XXX 遠大なビジョンやとりあえず後まわしでよいものは STATUS.txt へ


[TODO]	config tool

	多言語サポート
	GUI config


[TODO]	CGI スキンを動的に切替えられる？

		config.cgi -> menu.cgi


[TODO]	mime component filter で添付ファイルを禁止する

	こんなかんじ？

	use_article_mime_component_filter       =       yes
	article_mime_component_filter_rules     = 	ファイル

	[ファイル]

		multipart/*	*;name=.*\.exe 	reject
		multipart/*	attachment	reject

	もしくは、こんなの？


	article_mime_component_filter_rules     = 	ファイル
							reject_attachment

	article_mime_component_filter_unsafe_attachments = exe



[TODO]	メモリー使用量を、より少なく


[TODO]	Mail::Message->print() ???

	FML/Filter/External/spamc.pm:	$msg->print($wh);
	FML/Filter/External/clamscan.pm:	$msg->print($wh);
	FML/Filter/External/bogofilter.pm:	$msg->print($wh);
	FML/Filter/MimeComponent.pm:	    $msg->print($wh);

	FML/Process/Kernel.pm:		    $msg->print($wh);
	FML/Process/Kernel.pm:	$msg_queue->print();
	FML/Process/Kernel.pm:	$msg_in->print($wh);

	Mail/Delivery/Queue.pm:	$msg->print($fh);


[TODO]	変数名なんだが… *_mta_config_list は困ったな

		newml_command_mta_config_list
		rmml_command_mta_config_list

	こいつらは select_list とも、びみょうにちがうか…


[TODO]	スレッド関連のモジュール全部見直せよ

	スレッド DB 再生成の呪文がないよ;)

		makefml udb $ml_name rebuild (?)

	スレッドその他のエンジンもそれを使うことになる。

	MTI との統合

	output とモードの明瞭化を

	どこでどう CSS とたたかうの？

	index.html (fml-devel 234)
	 	最近のＭＬのレビュー
	 		＋
	 	選択画面 → index thread monthly

	subdir によって、ちょくせつのリンクがつらい？

	あるごりずむ ?

 	+
		+
			+ (3)


	+ (4)
		+

	となっているときに (3) の next_thread は、いつ次のリンクがわかる
	のか？予言できない。過去に向かってスレッドを修正するアルゴリズ
	ムなので、過去の修正がいつ行なわれるかは良くわからない;)

	→ (4) が来た時に (3) を修正するべき？

	とりあえず、すれっど全部のファイルに修正を試みるべきだ。
	ローカルな更新は、あまりよい結果にならないようだ。



======================================================================
○		アドレスの操作


[TODO]	reply-to: special hack

	   if (	To: ml1, ml2 ) {
		set Reply-To: ml1, ml2
	   }

	if ($curproc->is_fml8_managed_address($address)) {
		...
	}


======================================================================
○	ACL 拡張


[TODO]	xxx_restrictions = pgp_signature_check ?



======================================================================
○	内部構造


[TODO]	charset と言語(japanese,english)との対応関係を一箇所にまとめて定義

	[CHECK]
		FML/Header/Subject.pm
		Mail/Message/Encode.pm
		Mail/Message/ToHTML.pm

	OUTPUT をどうすればよいか？で決まる処理はなんとかなる。
	入力は自動判定になるが、出力は設定ファイルで決まる。

	問題は HTML 化のような入力が動的に変化する場合だ。
	基本的に入力は自動判定ということで、処理は同様なのだが、
	出力(たとえば .html の content-type)も入力と同期して変化するべきだ。


[TODO]	エラートラップ・フレームワーク


[TODO]	FML::PCB、FML::Config は、コンテキスト切替時にどうする？


[TODO]	FML::Restriction

	->regexp_match() は、まぁいいとおもうが、それいがいのところ

	FML/Process/CGI/Param.pm で使っているけど
		->regexp_match() スタイルにしてほしい


[TODO]	IO::Adapter::LDAP


[TODO]	IO::Adapter の PostgreSQL


[TODO]	udb_write_map ? udb_store_map ?

	local いがいのばあい、はどうすればいいの？
	MySQL につっこみたいとか〜


[TODO]	FML::Command::Admin::dir
	cgi_menu() ?
	ディレクトリ listing してくれる perl module ないかな？


[TODO]	remove $msg->{ next }

	FML/Filter/TextPlain.pm
	Mail/Message/ToHTML.pm
	Mail/Message.pm
	Mail/Bounce/Postfix19991231.pm
	Mail/Bounce/Qmail.pm


======================================================================
○		FNF-ify およびドキュメント



[TODO]	HOOK のガイドライン？

	どの HOOK あたりで、なにをかくべきか？


[TODO]	ドキュメント( tutorial )

	module/Mail::Message::ToHTML

	usage/ がいまいち
	fml bible のパートIIIの最初の部分のように編成し直すべき


[TODO]	ドキュメントの翻訳

	どうやってシンクロするの？


[TODO]	ドキュメント( tutorial/internals )


   $curproc

	$curproc->$object_$action

		$curproc->message_create();
		$curproc->message_XXX();

   object

	$object->$action;

		$object->create();
		$object->create_XXX();

[TODO]	FML::Process::* rules

		FML::Process::* rules

  1) reference to $main_cf

  $main_cf should be referenced only from within
	FML::Process::Kernel
	FML::Process::Switch
	FML::Process::Utils
  classes.


  2) reference to pcb (process control block) area.

  $pcb should be referenced only from within

	FML::Process::Kernel
	FML::Process::Switch
	FML::Process::Utils
	FML::PCB

  classes ? currently, no. referenced from the following other modules:

	FML::Article::Sequence
	FML::Parse
	FML::CGI::Menu
	FML::Command::User::get
	FML::Process::CGI::Kernel
	FML::Process::Command
	FML::Process::Distribute
	FML::Process::Error
	FML::Process::Fake


[TODO]	2005/05 のオーバホールの残り

   * 重たいので後回しにされてるもの
	Mail/Delivery/Queue.pm
	Mail/Delivery/SMTP.pm

	Mail/Message.pm
	Mail/Message/ToHTML.pm

	FML/Filter/MimeComponent.pm

   * スレッド関連のモジュール (2004/06 のオーバホールの残り?)
	FML/Article/Thread.pm
	FML/CGI/Thread.pm
	Mail/Message/Thread.pm
	Mail/Message/String.pm
	Mail/Message/ToHTML.pm
	FML/Process/HTMLify.pm
	Mail/Message/DB.pm
	FML/Command/Admin/thread.pm
	FML/Command/Admin/htmlify.pm

   * IN/OUT のチェック
	Mail/Message/ToHTML.pm

	OUT のちぇっくで最重要なのは？

	Mail/Message/ToHTML.pm

	Mail/Message/Print などに集結させるべきだろう？
		print_axss (against cross site scripting).

  * ちょっとコーディングスタイルが古いかな?

	FML::Header
	FML::Header::Subject
	File::Sequence
	Mail::Delivery::* (?)
	FML::Filter::TextPlain
	FML::Filter::Header

   * 使ってないモジュール?
	FML::Data::Deadline
	FML::Process::QMail
	FML::Sys::Alias

----------
$FML: 00_MEMO,v 1.118 2004/12/23 22:15:45 fukachan Exp $
